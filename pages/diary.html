<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        <title>Дневник</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <link rel="stylesheet" href="..//style/styles.css">
    </head>
    <body class="page">
        <a href="#main-content" class="skip-link">Перейти к основному контенту</a>
        <div class="page__container">
            <header class="header">
                <div class="container header__container">
                    <img src="../images/logo.png" alt="Логотип" class="header__logo">
                    <div class="header__content">
                        <h1 class="header__title"></h1>
                        <p class="header__subtitle">Студент разработчик</p>
                    </div>
                </div>
            </header>
            <nav class="nav">
                <div class="container nav__container">
                    <ul class="nav__list">
                        <li class="nav__item">
                            <a class="nav__link" href="../index.html">
                                <i class="bi bi-house nav__icon"></i>Главная
                            </a>
                        </li>
                         <li class="nav__item">
                            <a class="nav__link" href="projects.html">
                                <i class="bi bi-folder nav__icon"></i>Проекты
                            </a>
                        </li>
                         <li class="nav__item">
                            <a class="nav__link nav__link--active" href="diary.html">
                                <i class="bi bi-journal nav__icon"></i>Дневник
                            </a>
                        </li>
                         <li class="nav__item">
                            <a class="nav__link" href="contacts.html">
                                <i class="bi bi-telephone nav__icon"></i>Контакты
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <main class="main" id="main-content">
                <div class="container main__container">
                    <div class="page__header">
                        <h1 class="page-header__title">Мой учебный прогресс</h1>
                    </div>
                    <div class="content-grid">
                        <div class="content-grid__left">
                            <div class="card">
                                <div class="card__header">
                                    <h5 class="card__title">История обучения</h5>
                                </div>
                                <div class="card__body">
                                    <div class="timeline">
                                        <div class="timeline__item">
                                            <div class="timeline__badge timeline__badge--success">
                                                <i class="bi bi-check-lg timeline__icon"></i>
                                            </div>
                                            <div class="timeline__content">
                                                <h6 class="timeline__title">15 декабря - Верстка макета сайта</h6>
                                                <p class="timeline__description">Завершил работу над адаптивной версткой макета портфолио</p>
                                            </div>
                                            <div class="timeline__status">
                                                <span class="badge bg-success">Завершено</span>
                                            </div>
                                        </div>
                                        <div class="timeline__item">
                                            <div class="timeline__badge timeline__badge--success">
                                                <i class="bi bi-check-lg timeline__icon"></i>
                                            </div>
                                            <div class="timeline__content">
                                                <h6 class="timeline__title">10 декабря - JavaScript основы</h6>
                                                <p class="timeline__description">Изучил основы JavaScript: переменные, функции, циклы</p>
                                            </div>
                                            <div class="timeline__status">
                                                <span class="badge bg-success">Завершено</span>
                                            </div>
                                        </div>
                                        <div class="timeline__item">
                                            <div class="timeline__badge timeline__badge--warning">
                                                <i class="bi bi-arrow-clockwise timeline__icon"></i>
                                            </div>
                                            <div class="timeline__content">
                                                <h6 class="timeline__title">5 декабря - Работа с формами</h6>
                                                <p class="timeline__description">Осваиваю валидацию форм и работу с пользовательским вводом</p>
                                            </div>
                                            <div class="timeline__status">
                                                <span class="badge bg-warning">В процессе</span>
                                            </div>
                                        </div>
                                        <div class="timeline__item">
                                            <div class="timeline__badge timeline__badge--warning">
                                                <i class="bi bi-arrow-clockwise timeline__icon"></i>
                                            </div>
                                            <div class="timeline__content">
                                                <h6 class="timeline__title">1 декабря - Адаптивный дизайн</h6>
                                                <p class="timeline__description">Изучаю медиа-запросы и адаптивную верстку для мобильных устройств</p>
                                            </div>
                                            <div class="timeline__status">
                                                <span class="badge bg-warning">В процессе</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="content-grid__right">
                            <div class="card">
                                <div class="card__header">
                                    <h5 class="card__title">Текущие курсы</h5>
                                </div>
                                <div class="card__body">
                                    <div class="progress-item">
                                        <div class="progress-item__header">
                                            <span class="progress-item__label">Веб-разработка</span>
                                            <span class="progress-item__value">90%</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 90%"></div>
                                        </div>
                                    </div>
                                    <div class="progress-item">
                                        <div class="progress-item__header">
                                            <span class="progress-item__label">JavaScript</span>
                                            <span class="progress-item__value">70%</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-info" role="progressbar" style="width: 70%"></div>
                                        </div>
                                    </div>
                                    <div class="progress-item">
                                        <div class="progress-item__header">
                                            <span class="progress-item__label">React</span>
                                            <span class="progress-item__value">50%</span>
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar bg-warning" role="progressbar" style="width: 50%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary btn--primary" data-bs-toggle="modal" data-bs-target="#addEntryModal">
                                <i class="bi bi-plus-circle me-2"></i>Добавить запись
                            </button>
                        </div>
                    </div>
                </div>
            </main>
            <div class="modal fade" id="addEntryModal" tabindex="-1" aria-labelledby="addEntryModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addEntryModalLabel">Добавить учебную запись</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="addEntryForm">
                                <div class="mb-3">
                                    <label for="entryDate" class="form-label">Дата</label>
                                    <input type="date" class="form-control" id="entryDate" required>
                                </div>
                                <div class="mb-3">
                                    <label for="entryTitle" class="form-label">Название</label>
                                    <input type="text" class="form-control" id="entryTitle" placeholder="Что вы изучили?" required>
                                </div>
                                <div class="mb-3">
                                    <label for="entryDescription" class="form-label">Описание</label>
                                    <textarea class="form-control" id="entryDescription" rows="3" placeholder="Подробное описание..."></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="entryStatus" class="form-label">Статус</label>
                                    <select class="form-select" id="entryStatus">
                                        <option value="in-progress">В процессе</option>
                                        <option value="completed">Завершено</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                            <button type="button" class="btn btn-primary" id="saveEntryBtn">Сохранить</button>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container footer__container">
                    <p class="footer__copyright">&copy; 2025 Портфолио студента. Все права защищены.</p>
                    <a href="contacts.html" class="footer__link">Контакты</a>
                </div>
            </footer>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const saveEntryBtn = document.getElementById('saveEntryBtn');
                const addEntryForm = document.getElementById('addEntryForm');
                const timeline = document.querySelector('.timeline');

                // Установка сегодняшней даты по умолчанию
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('entryDate').value = today;

                // Функция для создания новой записи с правильными классами БЭМ
                function createTimelineEntry(data) {
                    const timelineItem = document.createElement('div');
                    timelineItem.className = 'timeline__item';
                    
                    const statusClass = data.status === 'completed' ? 'timeline__badge--success' : 'timeline__badge--warning';
                    const statusText = data.status === 'completed' ? 'Завершено' : 'В процессе';
                    const statusIcon = data.status === 'completed' ? 'bi-check-lg' : 'bi-arrow-clockwise';
                    const badgeClass = data.status === 'completed' ? 'bg-success' : 'bg-warning';
                    
                    timelineItem.innerHTML = `
                        <div class="timeline__badge ${statusClass}">
                            <i class="bi ${statusIcon} timeline__icon"></i>
                        </div>
                        <div class="timeline__content">
                            <h6 class="timeline__title">${data.date} - ${data.title}</h6>
                            <p class="timeline__description">${data.description}</p>
                        </div>
                        <div class="timeline__status">
                            <span class="badge ${badgeClass} mb-2">${statusText}</span>
                            <div>
                                <button class="btn btn-sm btn-outline-danger delete-entry">
                                    <i class="bi bi-trash me-1"></i>Удалить
                                </button>
                            </div>
                        </div>
                    `;
                    
                    // Обработчик удаления
                    const deleteBtn = timelineItem.querySelector('.delete-entry');
                    deleteBtn.addEventListener('click', function() {
                        if (confirm('Вы уверены, что хотите удалить эту запись?')) {
                            timelineItem.remove();
                            showNotification('Запись успешно удалена!', 'success');
                        }
                    });
                    
                    return timelineItem;
                }

                // Функция для показа уведомлений
                function showNotification(message, type = 'success') {
                    const alertClass = type === 'success' ? 'alert-success' : 'alert-danger';
                    const notification = document.createElement('div');
                    notification.className = `alert ${alertClass} alert-dismissible fade show position-fixed`;
                    notification.style.cssText = `
                        top: 20px;
                        right: 20px;
                        z-index: 9999;
                        min-width: 300px;
                    `;
                    notification.innerHTML = `
                        ${message}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    `;
                    
                    document.body.appendChild(notification);
                    
                    // Автоматическое скрытие через 3 секунды
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.remove();
                        }
                    }, 3000);
                }

                // Обработчик сохранения записи
                saveEntryBtn.addEventListener('click', function() {
                    const date = document.getElementById('entryDate').value;
                    const title = document.getElementById('entryTitle').value.trim();
                    const description = document.getElementById('entryDescription').value.trim();
                    const status = document.getElementById('entryStatus').value;
                    
                    // Валидация
                    if (!date || !title) {
                        showNotification('Пожалуйста, заполните обязательные поля!', 'error');
                        return;
                    }
                    
                    // Форматирование даты
                    const formattedDate = new Date(date).toLocaleDateString('ru-RU', {
                        day: 'numeric',
                        month: 'long'
                    });
                    
                    // Создание данных записи
                    const entryData = {
                        date: formattedDate,
                        title: title,
                        description: description || 'Описание отсутствует',
                        status: status
                    };
                    
                    // Добавление записи в начало таймлайна
                    const newEntry = createTimelineEntry(entryData);
                    timeline.insertBefore(newEntry, timeline.firstChild);
                    
                    // Закрытие модального окна и сброс формы
                    const modal = bootstrap.Modal.getInstance(document.getElementById('addEntryModal'));
                    modal.hide();
                    addEntryForm.reset();
                    
                    // Установка сегодняшней даты по умолчанию
                    document.getElementById('entryDate').value = today;
                    
                    showNotification('Запись успешно добавлена!');
                });

                // Кнопки удаления к существующим записям
                document.querySelectorAll('.timeline__item').forEach(item => {
                    if (!item.querySelector('.delete-entry')) {
                        const timelineStatus = item.querySelector('.timeline__status');
                        const deleteBtn = document.createElement('button');
                        deleteBtn.className = 'btn btn-sm btn-outline-danger delete-entry';
                        deleteBtn.innerHTML = '<i class="bi bi-trash me-1"></i>Удалить';
                        
                        // Создаем контейнер для кнопки и добавляем отступ
                        const buttonContainer = document.createElement('div');
                        buttonContainer.appendChild(deleteBtn);
                        timelineStatus.appendChild(buttonContainer);
                        
                        deleteBtn.addEventListener('click', function() {
                            if (confirm('Вы уверены, что хотите удалить эту запись?')) {
                                item.remove();
                                showNotification('Запись успешно удалена!', 'success');
                            }
                        });
                    }
                });
            });
    </script>
    </body>
</html>